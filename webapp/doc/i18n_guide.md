# å›½é™…åŒ– (i18n) ä½¿ç”¨æŒ‡å—

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•åœ¨é¡¹ç›®ä¸­æ–°å¢è¯­è¨€æ”¯æŒå’Œä½¿ç”¨å›½é™…åŒ–åŠŸèƒ½ã€‚

## ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ i18n/
â”‚   â”œâ”€â”€ index.ts              # i18n é…ç½®å…¥å£
â”‚   â”œâ”€â”€ languages.ts          # è¯­è¨€é…ç½®æ–‡ä»¶ï¼ˆé›†ä¸­ç®¡ç†æ‰€æœ‰æ”¯æŒçš„è¯­è¨€ï¼‰
â”‚   â””â”€â”€ locales/              # ç¿»è¯‘æ–‡ä»¶ç›®å½•
â”‚       â”œâ”€â”€ zh-CN.ts          # ç®€ä½“ä¸­æ–‡ç¿»è¯‘
â”‚       â””â”€â”€ en-US.ts          # è‹±æ–‡ç¿»è¯‘
â”œâ”€â”€ composables/
â”‚   â””â”€â”€ useI18n.ts            # i18n Composable å°è£…
â””â”€â”€ components/
    â””â”€â”€ ui/
        â””â”€â”€ LanguageSwitcher.vue  # è¯­è¨€åˆ‡æ¢ç»„ä»¶
```

## æ–°å¢è¯­è¨€æ”¯æŒ

### æ­¥éª¤ 1: æ·»åŠ è¯­è¨€é…ç½®

ç¼–è¾‘ `src/i18n/languages.ts`ï¼Œåœ¨ `languages` æ•°ç»„ä¸­æ·»åŠ æ–°è¯­è¨€ï¼š

```typescript
export const languages: Language[] = [
  {
    code: 'zh-CN',
    name: 'ç®€ä½“ä¸­æ–‡',
    flag: 'ğŸ‡¨ğŸ‡³',
    englishName: 'Simplified Chinese',
  },
  {
    code: 'en-US',
    name: 'English',
    flag: 'ğŸ‡ºğŸ‡¸',
    englishName: 'English',
  },
  // æ–°å¢æ—¥è¯­
  {
    code: 'ja-JP',
    name: 'æ—¥æœ¬èª',
    flag: 'ğŸ‡¯ğŸ‡µ',
    englishName: 'Japanese',
  },
]
```

**å­—æ®µè¯´æ˜ï¼š**
- `code`: è¯­è¨€ä»£ç ï¼ˆBCP 47 æ ‡å‡†ï¼‰ï¼Œå¦‚ `ja-JP`ã€`zh-TW`ã€`fr-FR` ç­‰
- `name`: ç”¨è¯¥è¯­è¨€è‡ªèº«çš„æ–‡å­—æ˜¾ç¤ºçš„åç§°ï¼ˆå¦‚æ—¥è¯­ç”¨ "æ—¥æœ¬èª"ï¼‰
- `flag`: å¯¹åº”çš„æ——å¸œ Emojiï¼ˆå¯é€‰ï¼Œç”¨äºè§†è§‰è¯†åˆ«ï¼‰
- `englishName`: è‹±æ–‡åç§°ï¼ˆå¯é€‰ï¼Œç”¨äºæ–‡æ¡£å’Œè°ƒè¯•ï¼‰

### æ­¥éª¤ 2: åˆ›å»ºç¿»è¯‘æ–‡ä»¶

åœ¨ `src/i18n/locales/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ç¿»è¯‘æ–‡ä»¶ï¼Œå¦‚ `ja-JP.ts`ï¼š

```typescript
export default {
  // é€šç”¨æ–‡æœ¬
  common: {
    submit: 'é€ä¿¡',
    cancel: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',
    confirm: 'ç¢ºèª',
    // ... å…¶ä»–ç¿»è¯‘
  },
  
  // ç«™ç‚¹ä¿¡æ¯
  site: {
    title: 'ãƒ•ã‚¡ã‚¤ãƒ«ä¸­ç¶™ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³',
    description: 'å®‰å…¨ã§ä¾¿åˆ©ãªãƒ•ã‚¡ã‚¤ãƒ«ä¸€æ™‚ä¿ç®¡ã‚µãƒ¼ãƒ“ã‚¹',
    // ... å…¶ä»–ç¿»è¯‘
  },
  
  // å¯¼èˆªæ 
  nav: {
    pickup: 'å—å–',
    upload: 'ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰',
    // ... å…¶ä»–ç¿»è¯‘
  },
  
  // æ›´å¤šæ¨¡å—...
}
```

**ğŸ’¡ æç¤ºï¼š** å¯ä»¥å‚è€ƒ `zh-CN.ts` æˆ– `en-US.ts` çš„ç»“æ„ï¼Œç¡®ä¿æ‰€æœ‰ key ä¿æŒä¸€è‡´ã€‚

### æ­¥éª¤ 3: æ³¨å†Œç¿»è¯‘æ–‡ä»¶

ç¼–è¾‘ `src/i18n/index.ts`ï¼Œå¯¼å…¥å¹¶æ³¨å†Œæ–°çš„ç¿»è¯‘æ–‡ä»¶ï¼š

```typescript
import zhCN from './locales/zh-CN'
import enUS from './locales/en-US'
import jaJP from './locales/ja-JP'  // å¯¼å…¥æ–°è¯­è¨€

const messages = {
  'zh-CN': zhCN,
  'en-US': enUS,
  'ja-JP': jaJP,  // æ³¨å†Œæ–°è¯­è¨€
}
```

### æ­¥éª¤ 4: æµ‹è¯•

å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œè¯­è¨€åˆ‡æ¢å™¨ä¼šè‡ªåŠ¨æ˜¾ç¤ºæ–°è¯­è¨€é€‰é¡¹ã€‚åˆ‡æ¢è¯­è¨€åï¼Œæ£€æŸ¥æ‰€æœ‰é¡µé¢çš„ç¿»è¯‘æ˜¯å¦æ­£ç¡®æ˜¾ç¤ºã€‚

## ä½¿ç”¨å›½é™…åŒ–

### åœ¨ Vue ç»„ä»¶ä¸­ä½¿ç”¨

```vue
<script setup lang="ts">
import { useI18n } from '@/composables/useI18n'

const { t, locale, setLocale } = useI18n()
</script>

<template>
  <div>
    <!-- ä½¿ç”¨ç¿»è¯‘ -->
    <h1>{{ t('site.title') }}</h1>
    <p>{{ t('site.description') }}</p>
    
    <!-- å¸¦é»˜è®¤å€¼çš„ç¿»è¯‘ -->
    <button>{{ t('common.submit', 'æäº¤') }}</button>
    
    <!-- æ˜¾ç¤ºå½“å‰è¯­è¨€ -->
    <p>Current locale: {{ locale }}</p>
    
    <!-- åˆ‡æ¢è¯­è¨€ -->
    <button @click="setLocale('en-US')">Switch to English</button>
  </div>
</template>
```

### API è¯´æ˜

- `t(key: string, defaultValue?: string)`: è·å–ç¿»è¯‘æ–‡æœ¬
  - `key`: ç¿»è¯‘çš„é”®åï¼ˆå¦‚ `'common.submit'`ï¼‰
  - `defaultValue`: å¯é€‰çš„é»˜è®¤å€¼ï¼ˆå½“ç¿»è¯‘ä¸å­˜åœ¨æ—¶ä½¿ç”¨ï¼‰
  
- `locale`: å½“å‰æ¿€æ´»çš„è¯­è¨€ä»£ç ï¼ˆå“åº”å¼ï¼‰

- `setLocale(lang: string)`: åˆ‡æ¢è¯­è¨€
  - è‡ªåŠ¨ä¿å­˜åˆ° localStorage
  - å…¨å±€ç”Ÿæ•ˆ

### ç¿»è¯‘ key å‘½åè§„èŒƒ

å»ºè®®ä½¿ç”¨ **æ¨¡å—åŒ–** çš„å‘½åç»“æ„ï¼š

```
æ¨¡å—.å­æ¨¡å—.å…·ä½“é¡¹
```

ç¤ºä¾‹ï¼š
- `common.submit` - é€šç”¨æ¨¡å—çš„"æäº¤"æŒ‰é’®
- `nav.pickup` - å¯¼èˆªæ çš„"å–ä»¶"é“¾æ¥
- `admin.dashboard.title` - ç®¡ç†åå°ä»ªè¡¨æ¿æ ‡é¢˜
- `upload.dragHint` - ä¸Šä¼ é¡µé¢çš„æ‹–æ‹½æç¤º

## è¯­è¨€åˆ‡æ¢å™¨

é¡¹ç›®åŒ…å«ä¸€ä¸ªç‹¬ç«‹çš„è¯­è¨€åˆ‡æ¢ç»„ä»¶ `LanguageSwitcher.vue`ï¼Œå¯ä»¥åœ¨ä»»ä½•é¡µé¢ä¸­ä½¿ç”¨ï¼š

```vue
<template>
  <LanguageSwitcher />
</template>

<script setup lang="ts">
import LanguageSwitcher from '@/components/ui/LanguageSwitcher.vue'
</script>
```

**å·²é›†æˆä½ç½®ï¼š**
- ç”¨æˆ·å‰å°å¯¼èˆªæ  (`NavBar.vue`) - å³ä¸Šè§’
- ç®¡ç†åå°å¯¼èˆªæ  (`AdminNavBar.vue`) - å³ä¸Šè§’

è¯­è¨€åˆ‡æ¢å™¨ä¼šè‡ªåŠ¨ï¼š
- è¯»å– `languages.ts` ä¸­é…ç½®çš„æ‰€æœ‰è¯­è¨€
- æ˜¾ç¤ºå½“å‰æ¿€æ´»çš„è¯­è¨€
- æä¾›ä¸‹æ‹‰èœå•ä¾›ç”¨æˆ·åˆ‡æ¢
- ä¿å­˜ç”¨æˆ·çš„è¯­è¨€åå¥½åˆ° localStorage

## å¸¸è§çš„ç¿»è¯‘ key

ä»¥ä¸‹æ˜¯é¡¹ç›®ä¸­å¸¸ç”¨çš„ç¿»è¯‘ keyï¼Œæ–°å¢è¯­è¨€æ—¶éœ€è¦æä¾›å¯¹åº”ç¿»è¯‘ï¼š

### é€šç”¨ (common)
- `submit`, `cancel`, `confirm`, `delete`, `edit`, `save`, `reset`
- `loading`, `success`, `error`, `warning`
- `yes`, `no`

### ç«™ç‚¹ (site)
- `title`, `description`, `logo`

### å¯¼èˆª (nav)
- `pickup`, `upload`, `home`

### ç®¡ç†åå° (admin)
- `admin.nav.*` - å¯¼èˆªæ å„é¡¹
- `admin.dashboard.*` - ä»ªè¡¨æ¿
- `admin.batches.*` - æ‰¹æ¬¡ç®¡ç†
- `admin.tokens.*` - Token ç®¡ç†
- `admin.config.*` - ç³»ç»Ÿé…ç½®

### ä¸Šä¼  (upload)
- `upload.title`, `upload.selectFile`, `upload.dragHint`

### å–ä»¶ (pickup)
- `pickup.title`, `pickup.enterCode`, `pickup.download`

## æœ€ä½³å®è·µ

1. **ä¿æŒ key ä¸€è‡´æ€§**  
   æ‰€æœ‰è¯­è¨€çš„ç¿»è¯‘æ–‡ä»¶å¿…é¡»åŒ…å«ç›¸åŒçš„ key ç»“æ„ï¼Œå¦åˆ™ä¼šå¯¼è‡´éƒ¨åˆ†è¯­è¨€ç¼ºå¤±ç¿»è¯‘ã€‚

2. **ä½¿ç”¨æœ‰æ„ä¹‰çš„ key åç§°**  
   é¿å…ä½¿ç”¨ `text1`ã€`label2` è¿™æ ·çš„åç§°ï¼Œåº”è¯¥ä½¿ç”¨æè¿°æ€§çš„åç§°å¦‚ `uploadButton`ã€`successMessage`ã€‚

3. **æä¾›é»˜è®¤å€¼**  
   åœ¨è°ƒç”¨ `t()` æ—¶æä¾›é»˜è®¤å€¼ï¼Œå¯ä»¥åœ¨ç¿»è¯‘ç¼ºå¤±æ—¶æœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼š
   ```vue
   {{ t('some.key', 'é»˜è®¤æ–‡æœ¬') }}
   ```

4. **æ¨¡å—åŒ–ç»„ç»‡**  
   æŒ‰ç…§åŠŸèƒ½æ¨¡å—ç»„ç»‡ç¿»è¯‘æ–‡ä»¶ï¼Œä¾¿äºç»´æŠ¤ï¼š
   ```typescript
   export default {
     common: { /* é€šç”¨ç¿»è¯‘ */ },
     nav: { /* å¯¼èˆªç¿»è¯‘ */ },
     admin: {
       dashboard: { /* ä»ªè¡¨æ¿ç¿»è¯‘ */ },
       config: { /* é…ç½®ç¿»è¯‘ */ },
     },
   }
   ```

5. **æ³¨é‡Šå¤æ‚ç¿»è¯‘**  
   å¯¹äºæœ‰ç‰¹æ®Šå«ä¹‰æˆ–ä¸Šä¸‹æ–‡çš„ç¿»è¯‘ï¼Œæ·»åŠ æ³¨é‡Šè¯´æ˜ï¼š
   ```typescript
   export default {
     upload: {
       // æç¤ºç”¨æˆ·æ‹–æ‹½æ–‡ä»¶åˆ°ä¸Šä¼ åŒºåŸŸ
       dragHint: 'æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶',
     },
   }
   ```

6. **æµ‹è¯•æ‰€æœ‰è¯­è¨€**  
   æ–°å¢æˆ–ä¿®æ”¹ç¿»è¯‘åï¼Œåˆ‡æ¢åˆ°æ¯ç§è¯­è¨€æµ‹è¯•ï¼Œç¡®ä¿æ˜¾ç¤ºæ­£ç¡®ã€‚

## æŠ€æœ¯å®ç°

é¡¹ç›®ä½¿ç”¨ [vue-i18n v9](https://vue-i18n.intlify.dev/) ä½œä¸ºå›½é™…åŒ–æ¡†æ¶ï¼Œé‡‡ç”¨ **Composition API** æ¨¡å¼ã€‚

### ç‰¹æ€§
- âœ… å“åº”å¼è¯­è¨€åˆ‡æ¢
- âœ… localStorage æŒä¹…åŒ–
- âœ… TypeScript ç±»å‹æ”¯æŒ
- âœ… æ¨¡å—åŒ–ç¿»è¯‘æ–‡ä»¶
- âœ… é›†ä¸­å¼è¯­è¨€é…ç½®
- âœ… æ˜“äºæ‰©å±•æ–°è¯­è¨€

### é…ç½®æ–‡ä»¶è¯´æ˜

- **`src/i18n/index.ts`**  
  vue-i18n é…ç½®å…¥å£ï¼Œè®¾ç½®é»˜è®¤è¯­è¨€ã€å›é€€è¯­è¨€ã€ç¿»è¯‘æ¶ˆæ¯ç­‰ã€‚

- **`src/i18n/languages.ts`**  
  è¯­è¨€é…ç½®æ–‡ä»¶ï¼Œé›†ä¸­ç®¡ç†æ‰€æœ‰æ”¯æŒçš„è¯­è¨€ä¿¡æ¯ï¼ˆä»£ç ã€åç§°ã€æ——å¸œç­‰ï¼‰ã€‚æ–°å¢è¯­è¨€é¦–å…ˆåœ¨æ­¤é…ç½®ã€‚

- **`src/composables/useI18n.ts`**  
  å°è£…äº† vue-i18n çš„ Composableï¼Œæä¾›ç®€åŒ–çš„ APIï¼ˆ`t`ã€`locale`ã€`setLocale`ï¼‰ã€‚

## å¸¸è§é—®é¢˜

**Q: æ–°å¢è¯­è¨€åï¼Œè¯­è¨€åˆ‡æ¢å™¨æ²¡æœ‰æ˜¾ç¤ºæ–°è¯­è¨€ï¼Ÿ**  
A: æ£€æŸ¥ `src/i18n/languages.ts` æ˜¯å¦æ­£ç¡®æ·»åŠ äº†è¯­è¨€é…ç½®ï¼Œç¡®ä¿ `code`ã€`name` å’Œ `flag` å­—æ®µéƒ½å·²å¡«å†™ã€‚

**Q: åˆ‡æ¢è¯­è¨€åï¼Œéƒ¨åˆ†å†…å®¹æ²¡æœ‰ç¿»è¯‘ï¼Ÿ**  
A: æ£€æŸ¥æ–°è¯­è¨€çš„ç¿»è¯‘æ–‡ä»¶æ˜¯å¦åŒ…å«æ‰€æœ‰å¿…éœ€çš„ keyã€‚å¯ä»¥å¯¹æ¯” `zh-CN.ts` ç¡®ä¿ç»“æ„ä¸€è‡´ã€‚

**Q: å¦‚ä½•ä¿®æ”¹é»˜è®¤è¯­è¨€ï¼Ÿ**  
A: ç¼–è¾‘ `src/i18n/languages.ts`ï¼Œä¿®æ”¹ `DEFAULT_LANGUAGE` å¸¸é‡çš„å€¼ã€‚

**Q: è¯­è¨€åå¥½ä¿å­˜åœ¨å“ªé‡Œï¼Ÿ**  
A: ä¿å­˜åœ¨æµè§ˆå™¨çš„ localStorage ä¸­ï¼Œkey ä¸º `'locale'`ã€‚

**Q: å¦‚ä½•åœ¨ JavaScript ä»£ç ä¸­ä½¿ç”¨ç¿»è¯‘ï¼Ÿ**  
A: åœ¨ `<script setup>` ä¸­é€šè¿‡ `useI18n()` è·å– `t` å‡½æ•°ï¼Œç„¶åè°ƒç”¨ `t('key')`ã€‚

## å‚è€ƒèµ„æº

- [Vue I18n å®˜æ–¹æ–‡æ¡£](https://vue-i18n.intlify.dev/)
- [BCP 47 è¯­è¨€æ ‡ç­¾](https://www.rfc-editor.org/rfc/bcp/bcp47.txt)
- [Unicode CLDR è¯­è¨€æ•°æ®](https://cldr.unicode.org/)
- [Emoji å›½æ——åˆ—è¡¨](https://emojipedia.org/flags/)

---

**ç»´æŠ¤è€…æ³¨æ„ï¼š** æ–°å¢æˆ–ä¿®æ”¹è¯­è¨€é…ç½®åï¼Œè¯·æ›´æ–°æœ¬æ–‡æ¡£ã€‚
